package resolvers

// This file will be automatically regenerated based on the schema, any resolver implementations
// will be copied through when generating and any unknown code will be moved to the end.
// Code generated by github.com/99designs/gqlgen version v0.17.62

import (
	"context"
	"fmt"

	"github.com/polatbilal/gqlgen-ent/ent"
	"github.com/polatbilal/gqlgen-ent/ent/jobdetail"
	"github.com/polatbilal/gqlgen-ent/ent/jobpayments"
	"github.com/polatbilal/gqlgen-ent/graph/generated"
	"github.com/polatbilal/gqlgen-ent/graph/model"
	"github.com/polatbilal/gqlgen-ent/middlewares"
)

// Date is the resolver for the Date field.
func (r *jobPaymentsResolver) Date(ctx context.Context, obj *ent.JobPayments) (*string, error) {
	if obj.Date.IsZero() {
		return nil, nil
	}
	date := obj.Date.Format("2006-01-02")
	return &date, nil
}

// CreateJobPayments is the resolver for the createJobPayments field.
func (r *mutationResolver) CreateJobPayments(ctx context.Context, input model.JobPaymentsInput) (*ent.JobPayments, error) {
	panic(fmt.Errorf("not implemented: CreateJobPayments - createJobPayments"))
}

// UpdateJobPayments is the resolver for the updateJobPayments field.
func (r *mutationResolver) UpdateJobPayments(ctx context.Context, yibfNo int, input model.JobPaymentsInput) (*ent.JobPayments, error) {
	panic(fmt.Errorf("not implemented: UpdateJobPayments - updateJobPayments"))
}

// DeleteJobPayments is the resolver for the deleteJobPayments field.
func (r *mutationResolver) DeleteJobPayments(ctx context.Context, yibfNo int) (*ent.JobPayments, error) {
	panic(fmt.Errorf("not implemented: DeleteJobPayments - deleteJobPayments"))
}

// JobPayments is the resolver for the jobPayments field.
func (r *queryResolver) JobPayments(ctx context.Context, yibfNo int) ([]*ent.JobPayments, error) {
	client := middlewares.GetClientFromContext(ctx)
	query := client.JobPayments.Query()
	query = query.Where(jobpayments.HasPaymentsWith(jobdetail.YibfNo(yibfNo)))
	payments, err := query.All(ctx)
	if err != nil {
		return nil, err
	}
	return payments, nil
}

// JobPayments returns generated.JobPaymentsResolver implementation.
func (r *Resolver) JobPayments() generated.JobPaymentsResolver { return &jobPaymentsResolver{r} }

type jobPaymentsResolver struct{ *Resolver }
